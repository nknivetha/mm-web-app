<html>
<!--page for admin to create users-->
<html>
<head>
<title>Create Users</title>

<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase.js"></script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDkJap-l-nEEa8_Up_fRyBKadFLO8PzKQM",
    authDomain: "miraclemessages-v2.firebaseapp.com",
    databaseURL: "https://miraclemessages-v2.firebaseio.com",
    projectId: "miraclemessages-v2",
    storageBucket: "miraclemessages-v2.appspot.com",
    messagingSenderId: "669586730683"
  };
  app = firebase.initializeApp(config);
  var secondaryApp = firebase.initializeApp(config, "Secondary");
</script>

</head>
<body>

<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.1/firebase.js"></script>


<script lang="text/javascript">
var db = firebase.database(app);
var checkFrom = ""; // field to check from
var query; // user input of what to check for
var auth = app.auth();
var isAdmin = false;
// Check if user is signed in - only allow access to the page if they are
// If not logged into the admin account, redirect to the volunteer
// search page.
auth.onAuthStateChanged(function(user) {
  if (user) {
    isAdmin = true;
    console.log(user);
    // User is signed in.
  } else {
    alert("not logged in");
    window.location.href = 'volunteerSearch.html';
  }
});
  function createUser(){
    var email = document.getElementById("mynamec").value;
    var pword = document.getElementById("mypassc").value;
    var success = document.getElementById("success");
    secondaryApp.auth().createUserWithEmailAndPassword(email, pword).then(function(firebaseUser) {
        console.log("User " + firebaseUser.user.uid + " created successfully!");
        success.innerHTML = "User " + email + " created successfully!";

        // Set the user type to volunteer.
        userTypeRef = db.ref('usertypes/' + firebaseUser.user.uid);
        userTypeRef.set({'type': 'volunteer'});

        secondaryApp.auth().signOut();
    }, function(error) {
        console.log(error.code);
        var errorCode = error.code;
        var errorMessage = error.message;
        success.innerHTML = error.message;
    });
  }
</script>

Create new user
<div id="create">
  E-mail: <input type="text" id="mynamec"><br/>
  Password: <input type="text" id="mypassc">
  <input type="button" value="Create User" onclick="createUser()">
</div>
<div id ="success"></div>

</body>
</html>
